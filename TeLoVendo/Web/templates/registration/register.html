{% extends 'core/index.html' %}

{% block modal %}
<div class="modal modal fade show" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="display:block">
    <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-body">
                <div class="d-flex justify-content-between mt-2">
                    <h5 class="card-title m-auto mt-3">Registrarse</h5>
                    <a class="btn-close" href="{% url 'home' %}"></a>
                </div>
                <div class="d-grid container px-2">
                    <form method="POST" class="text-center">
                        {% csrf_token %}

                        <div class="row">
                            <div class="col-12">
                                <div class="d-grid mt-4">
                                    <label for="id_email">{{form.email.label}}</label>
                                    {{form.email}}
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="d-grid mt-4 w-100">
                                    <label for="id_phone">{{form.phone.label}}</label>
                                    <div class="d-flex align-items-center rounded-3 w-100">
                                        <label class="mx-2 text-muted">+569</label>
                                        <div class="w-100">{{form.phone}}</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="d-grid mt-4">
                                    <label for="id_f_name">{{form.f_name.label}}</label>
                                    {{form.f_name}}
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="d-grid mt-4">
                                    <label for="id_l_name">{{form.l_name.label}}</label>
                                    {{form.l_name}}
                                </div>
                            </div>
                            <div class="col-12 col-md-5 px-md-1">
                                <div class="d-grid mt-4">
                                    <label for="id_region">{{form.region.label}}</label>
                                    <div class="w-100">{{form.region}}</div>
                                </div>
                            </div>

                            <div class="col-12 col-md-5 px-md-1 ms-5">
                                <div class="d-grid mt-4" id="comuna-container">
                                    <label for="id_username">Comuna</label>
                                    <div class="w-100 ms-0">
                                        <select>
                                            <option>Seleccionar comuna</option>
                                        </select>
                                        {% for region, comunas in chile.items %}
                                        <select id='{{region}}' name="comuna-{{region}}" style="display:none">
                                            {% for comuna in comunas %}
                                            <option value="{{comuna}}">{{comuna}}</option>
                                            {% endfor %}
                                        </select>
                                        {% endfor %}
                                    </div>

                                </div>
                            </div>

                            <div class="col-12 col-md-8">
                                <div class="d-grid mt-4">
                                    <label for="id_street">{{form.street.label}}</label>
                                    {{form.street}}
                                </div>
                            </div>
                            <div class="col-12 col-md-4">
                                <div class="d-grid mt-4">
                                    <label for="id_number">{{form.number.label}}</label>
                                    {{form.number}}
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="btn bg-primary rounded-4 mt-4 mb-4 w-25 m-auto">Registrarse</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock modal %}